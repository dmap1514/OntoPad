import{c0 as bt,c1 as gt,Q as wt,c2 as Pt,c3 as vt,c4 as xt,c5 as At,J as Ot,c6 as Rt,c7 as jt,c8 as Mt,c9 as Tt,ca as St,cb as Ht,cc as W,cd as Dt,ce as It,bY as dr,bZ as c,cf as ur,cg as lr,ch as fr,ci as pr,cj as _r,K as ot,ck as mr,cl as j,cm as hr,cn as yr,co as $t,cp as Ct,cq as br,cr as qe,cs as gr,ct as wr,cu as Pr,cv as vr,cw as Et,cx as xr,cy as Ar}from"./index-Do3dthP6.js";const Or={Lexer:bt,Parser:gt,Writer:wt,Store:Pt,StreamParser:vt,StreamWriter:xt,Util:At,DataFactory:Ot,Term:Rt,NamedNode:jt,Literal:Mt,BlankNode:Tt,Variable:St,DefaultGraph:Ht,Quad:W,Triple:W,termFromId:Dt,termToId:It},Rr=Object.freeze(Object.defineProperty({__proto__:null,BlankNode:Tt,DataFactory:Ot,DefaultGraph:Ht,Lexer:bt,Literal:Mt,NamedNode:jt,Parser:gt,Quad:W,Store:Pt,StreamParser:vt,StreamWriter:xt,Term:Rt,Triple:W,Util:At,Variable:St,Writer:wt,default:Or,termFromId:Dt,termToId:It},Symbol.toStringTag,{value:"Module"}));var X={};const jr=dr(Rr);var Ce={},G={},C={},h={},Bt={},Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});var Nt={};Object.defineProperty(Nt,"__esModule",{value:!0});var qt={};Object.defineProperty(qt,"__esModule",{value:!0});var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});var Qt={};Object.defineProperty(Qt,"__esModule",{value:!0});var Xt={};Object.defineProperty(Xt,"__esModule",{value:!0});var Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});var zt={};Object.defineProperty(zt,"__esModule",{value:!0});var Vt={};Object.defineProperty(Vt,"__esModule",{value:!0});var U={};Object.defineProperty(U,"__esModule",{value:!0});U.Logger=void 0;class z{static getLevelOrdinal(e){return z.LEVELS[e]}}U.Logger=z;z.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(Lt,s),a(Ft,s),a(Kt,s),a(Nt,s),a(qt,s),a(Jt,s),a(Wt,s),a(Qt,s),a(Xt,s),a(Gt,s),a(Ut,s),a(zt,s),a(Vt,s),a(U,s)})(Bt);var O={};Object.defineProperty(O,"__esModule",{value:!0});O.ActionContextKey=O.ActionContext=void 0;const it=ur;class S{constructor(e={}){this.map=(0,it.Map)(e)}setDefault(e,a){return this.has(e)?this:this.set(e,a)}set(e,a){return this.setRaw(e.name,a)}setRaw(e,a){return new S(this.map.set(e,a))}delete(e){return new S(this.map.delete(e.name))}get(e){return this.getRaw(e.name)}getRaw(e){return this.map.get(e)}getSafe(e){if(!this.has(e))throw new Error(`Context entry ${e.name} is required but not available`);return this.get(e)}has(e){return this.hasRaw(e.name)}hasRaw(e){return this.map.has(e)}merge(...e){let a=this;for(const n of e)for(const t of n.keys())a=a.set(t,n.get(t));return a}keys(){return[...this.map.keys()].map(e=>new Yt(e))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(e){return e instanceof S?e:new S((0,it.Map)(e||{}))}}O.ActionContext=S;class Yt{constructor(e){this.name=e}}O.ActionContextKey=Yt;var E={};Object.defineProperty(E,"__esModule",{value:!0});E.Bus=void 0;class Mr{constructor(e){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,e)}subscribe(e){this.actors.push(e),this.reorderForDependencies()}subscribeObserver(e){this.observers.push(e)}unsubscribe(e){const a=this.actors.indexOf(e);return a>=0?(this.actors.splice(a,1),!0):!1}unsubscribeObserver(e){const a=this.observers.indexOf(e);return a>=0?(this.observers.splice(a,1),!0):!1}publish(e){return this.actors.map(a=>({actor:a,reply:a.test(e)}))}onRun(e,a,n){for(const t of this.observers)t.onRun(e,a,n)}addDependencies(e,a){for(const n of a){let t=this.dependencyLinks.get(n);t||(t=[],this.dependencyLinks.set(n,t)),t.push(e)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const e=[];for(const a of this.dependencyLinks.keys()){const n=this.actors.indexOf(a);n>=0&&(this.actors.splice(n,1),e.push(a))}for(;e.length>0;){let a=-1;for(let t=0;t<e.length;t++){let r=!0;for(const o of this.dependencyLinks.get(e[t]))if(!this.actors.includes(o)&&e.includes(o)){r=!1;break}if(r){a=t;break}}if(a<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const n=e.splice(a,1)[0];this.actors.push(n)}}}}E.Bus=Mr;var V={};Object.defineProperty(V,"__esModule",{value:!0});V.BusIndexed=void 0;const Tr=E;class Sr extends Tr.Bus{constructor(e){super(e),this.actorsIndex={}}subscribe(e){const a=this.getActorIdentifier(e)||"_undefined_";let n=this.actorsIndex[a];n||(n=this.actorsIndex[a]=[]),n.push(e),super.subscribe(e)}unsubscribe(e){const a=this.getActorIdentifier(e)||"_undefined_",n=this.actorsIndex[a];if(n){const t=n.indexOf(e);t>=0&&n.splice(t,1),n.length===0&&delete this.actorsIndex[a]}return super.unsubscribe(e)}publish(e){const a=this.getActionIdentifier(e);return a?[...this.actorsIndex[a]||[],...this.actorsIndex._undefined_||[]].map(t=>({actor:t,reply:t.test(e)})):super.publish(e)}getActorIdentifier(e){return this.actorIdentifierFields.reduce((a,n)=>a[n],e)}getActionIdentifier(e){return this.actionIdentifierFields.reduce((a,n)=>a[n],e)}}V.BusIndexed=Sr;var B={};Object.defineProperty(B,"__esModule",{value:!0});B.CONTEXT_KEY_LOGGER=void 0;const Hr=O;B.CONTEXT_KEY_LOGGER=new Hr.ActionContextKey("@comunica/core:log");var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.ActionObserver=void 0;class Dr{constructor(e){Object.assign(this,e)}}Y.ActionObserver=Dr;var Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.Actor=void 0;const Ir=B;class A{constructor(e){this.beforeActors=[],Object.assign(this,e),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors)}static getContextLogger(e){return e.get(Ir.CONTEXT_KEY_LOGGER)}runObservable(e){const a=this.run(e);return this.bus.onRun(this,e,a),a}async initialize(){return!0}async deinitialize(){return!0}getDefaultLogData(e,a){const n=a?a():{};return n.actor=this.name,n}logTrace(e,a,n){const t=A.getContextLogger(e);t&&t.trace(a,this.getDefaultLogData(e,n))}logDebug(e,a,n){const t=A.getContextLogger(e);t&&t.debug(a,this.getDefaultLogData(e,n))}logInfo(e,a,n){const t=A.getContextLogger(e);t&&t.info(a,this.getDefaultLogData(e,n))}logWarn(e,a,n){const t=A.getContextLogger(e);t&&t.warn(a,this.getDefaultLogData(e,n))}logError(e,a,n){const t=A.getContextLogger(e);t&&t.error(a,this.getDefaultLogData(e,n))}logFatal(e,a,n){const t=A.getContextLogger(e);t&&t.fatal(a,this.getDefaultLogData(e,n))}}Z.Actor=A;var k={};Object.defineProperty(k,"__esModule",{value:!0});k.Mediator=void 0;class $r{constructor(e){Object.assign(this,e)}publish(e){const a=this.bus.publish(e);if(a.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return a}async mediateActor(e){return await this.mediateWith(e,this.publish(e))}async mediate(e){return(await this.mediateActor(e)).runObservable(e)}}k.Mediator=$r;(function(s){var e=c&&c.__createBinding||(Object.create?function(r,o,i,d){d===void 0&&(d=i);var l=Object.getOwnPropertyDescriptor(o,i);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(r,d,l)}:function(r,o,i,d){d===void 0&&(d=i),r[d]=o[i]}),a=c&&c.__exportStar||function(r,o){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&e(o,r,i)};Object.defineProperty(s,"__esModule",{value:!0}),s.Logger=void 0;const t=Bt.Logger;s.Logger=t,a(O,s),a(E,s),a(V,s),a(B,s),a(Y,s),a(Z,s),a(k,s)})(h);var M={},_={};Object.defineProperty(_,"__esModule",{value:!0});_.KeysRdfUpdateQuads=_.KeysRdfResolveQuadPattern=_.KeysRdfParseHtmlScript=_.KeysRdfParseJsonLd=_.KeysQueryOperation=_.KeysInitQuery=_.KeysHttpProxy=_.KeysHttpMemento=_.KeysHttpWayback=_.KeysHttp=_.KeysCore=void 0;const u=h;_.KeysCore={log:u.CONTEXT_KEY_LOGGER};_.KeysHttp={includeCredentials:new u.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new u.ActionContextKey("@comunica/bus-http:auth"),fetch:new u.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new u.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new u.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new u.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelay:new u.ActionContextKey("@comunica/bus-http:http-retry-delay"),httpRetryOnServerError:new u.ActionContextKey("@comunica/bus-http:http-retry-on-server-error")};_.KeysHttpWayback={recoverBrokenLinks:new u.ActionContextKey("@comunica/bus-http:recover-broken-links")};_.KeysHttpMemento={datetime:new u.ActionContextKey("@comunica/actor-http-memento:datetime")};_.KeysHttpProxy={httpProxyHandler:new u.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")};_.KeysInitQuery={initialBindings:new u.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new u.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new u.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new u.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new u.ActionContextKey("@comunica/actor-init-query:queryString"),query:new u.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new u.ActionContextKey("@comunica/actor-init-query:baseIRI"),functionArgumentsCache:new u.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new u.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),extensionFunctionCreator:new u.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new u.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new u.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new u.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new u.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new u.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new u.ActionContextKey("@context")};_.KeysQueryOperation={operation:new u.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new u.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new u.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new u.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new u.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new u.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new u.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new u.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph")};_.KeysRdfParseJsonLd={documentLoader:new u.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new u.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new u.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")};_.KeysRdfParseHtmlScript={processingHtmlScript:new u.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new u.ActionContextKey("extractAllScripts")};_.KeysRdfResolveQuadPattern={sources:new u.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sources"),source:new u.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:source"),sourceIds:new u.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sourceIds"),hypermediaSourcesAggregatedStores:new u.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:hypermediaSourcesAggregatedStores")};_.KeysRdfUpdateQuads={destination:new u.ActionContextKey("@comunica/bus-rdf-update-quads:destination")};(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(_,s)})(M);Object.defineProperty(C,"__esModule",{value:!0});C.RdfDereferencerBase=void 0;const Cr=h,Er=M;class Br{constructor(e){this.mediatorDereferenceRdf=e.mediatorDereferenceRdf}dereference(e,a={}){const n=new Cr.ActionContext(a);return this.mediatorDereferenceRdf.mediate({context:typeof a.fetch=="function"?n.setDefault(Er.KeysHttp.fetch,a.fetch):n,headers:new Headers(a.headers),method:a.method,url:e})}}C.RdfDereferencerBase=Br;Object.defineProperty(G,"__esModule",{value:!0});G.RdfDereferencer=void 0;const Lr=C;class Fr extends Lr.RdfDereferencerBase{}G.RdfDereferencer=Fr;var $={},ee={};Object.defineProperty(ee,"__esModule",{value:!0});ee.MediatorRace=void 0;const Kr=h;class Nr extends Kr.Mediator{constructor(e){super(e)}mediateWith(e,a){return new Promise((n,t)=>{const r=[];for(const o of a)o.reply.then(()=>{n(o.actor)}).catch(i=>{r.push(i),r.length===a.length&&t(new Error(`${this.name} mediated over all rejecting actors:
${r.map(d=>d.message).join(`
`)}`))})})}}ee.MediatorRace=Nr;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(ee,s)})($);var Je={},te={};Object.defineProperty(te,"__esModule",{value:!0});te.MediatorNumber=void 0;const qr=h;class Jr extends qr.Mediator{constructor(e){super(e),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return e=>e.reduce((a,n,t)=>{const r=this.getOrDefault(n[this.field],Number.POSITIVE_INFINITY);return r!==null&&(Number.isNaN(a[0])||a[0]>r)?[r,t]:a},[Number.NaN,-1])[1];case"max":return e=>e.reduce((a,n,t)=>{const r=this.getOrDefault(n[this.field],Number.NEGATIVE_INFINITY);return r!==null&&(Number.isNaN(a[0])||a[0]<r)?[r,t]:a},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(e,a){return e===void 0?a:e}async mediateWith(e,a){let n=a.map(({reply:i})=>i);const t=[];if(this.ignoreErrors){const i={};i[this.field]=null,n=n.map(d=>d.catch(l=>(t.push(l),i)))}const r=await Promise.all(n),o=this.indexPicker(r);if(o<0)throw new Error(`All actors rejected their test in ${this.name}
${t.map(i=>i.message).join(`
`)}`);return a[o].actor}}te.MediatorNumber=Jr;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(te,s)})(Je);var We={},re={},I={},ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.ActorHttp=void 0;const Wr=h,Qr=fr;globalThis.ReadableStream||(globalThis.ReadableStream=lr().ReadableStream);const Xr=pr,Gr=_r;class Ur extends Wr.Actor{constructor(e){super(e)}static toNodeReadable(e){return Xr(e)||e===null?e:new Qr.ReadableWebToNodeStream(e)}static toWebReadableStream(e){return Gr(e)}static headersToHash(e){const a={};return e.forEach((n,t)=>{a[t]=n}),a}}ne.ActorHttp=Ur;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(ne,s)})(I);var ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.FetchInitPreprocessor=void 0;const zr=I;class Vr{async handle(e){if(e.headers){const a=new Headers(e.headers);a.has("user-agent")&&a.delete("user-agent"),e.headers=a}if(e!=null&&e.headers&&"append"in e.headers&&(e.headers=zr.ActorHttp.headersToHash(e.headers)),e.body&&typeof e.body!="string"&&"getReader"in e.body){const a=e.body.getReader(),n=[];for(;;){const{done:t,value:r}=await a.read();if(t)break;n.push(r)}e.body=n.join("")}return{keepalive:!e.body,...e}}async createAbortController(){return new AbortController}}ae.FetchInitPreprocessor=Vr;Object.defineProperty(re,"__esModule",{value:!0});re.ActorHttpFetch=void 0;const Ee=I,x=M,Yr=ae;class Q extends Ee.ActorHttp{constructor(e){super(e),this.userAgent=Q.createUserAgent(),this.fetchInitPreprocessor=new Yr.FetchInitPreprocessor(e.agentOptions)}static createUserAgent(){return`Comunica/actor-http-fetch (${typeof globalThis.navigator>"u"?`Node.js ${ot.version}; ${ot.platform}`:`Browser-${globalThis.navigator.userAgent}`})`}async test(e){return{time:Number.POSITIVE_INFINITY}}static async getResponse(e,a,n,t,r,o){var l;let i,d=t+1;for(;d-- >0;)try{const f=await e(a,n);if(o&&f.status>=500&&f.status<600)throw new Error(`Server replied with response code ${f.status}: ${f.statusText}`);return f}catch(f){if(i=f,(l=n.signal)!=null&&l.aborted)throw f;d>0&&await new Promise((p,y)=>{var w;setTimeout(p,r),(w=n.signal)==null||w.addEventListener("abort",()=>{y(new Error("Fetch aborted by timeout."))})})}throw t>0?new Error(`Number of fetch retries (${t}) exceeded. Last error: ${String(i)}`):i}async run(e){var d,l,f,p,y,w,m,b;const a=((d=e.init)==null?void 0:d.headers)??{};e.init=e.init??{},e.init.headers=new Headers(a),e.init.headers.has("user-agent")||e.init.headers.append("user-agent",this.userAgent);const n=e.context.get(x.KeysHttp.auth);n&&e.init.headers.append("Authorization",`Basic ${mr.from(n).toString("base64")}`),this.logInfo(e.context,`Requesting ${typeof e.input=="string"?e.input:e.input.url}`,()=>({headers:Ee.ActorHttp.headersToHash(new Headers(e.init.headers)),method:e.init.method||"GET"})),(l=e.init)!=null&&l.headers&&"append"in e.init.headers&&e.context.has(x.KeysHttp.fetch)&&(e.init.headers=Ee.ActorHttp.headersToHash(e.init.headers));let t={...e.init};e.context.get(x.KeysHttp.includeCredentials)&&(t.credentials="include");const r=(f=e.context)==null?void 0:f.get(x.KeysHttp.httpTimeout);let o,i;if(r!==void 0){const g=await this.fetchInitPreprocessor.createAbortController();t.signal=g.signal,i=()=>g.abort(),o=setTimeout(()=>i(),r)}try{t=await this.fetchInitPreprocessor.handle(t);const g=((p=e.context)==null?void 0:p.get(x.KeysHttp.httpRetryCount))??0,K=((y=e.context)==null?void 0:y.get(x.KeysHttp.httpRetryDelay))??0,Ie=((w=e.context)==null?void 0:w.get(x.KeysHttp.httpRetryOnServerError))??!1,$e=(m=e.context)==null?void 0:m.get(x.KeysHttp.fetch),P=await Q.getResponse($e||fetch,e.input,t,g,K,Ie);return o!==void 0&&((((b=e.context)==null?void 0:b.get(x.KeysHttp.httpBodyTimeout))||!1)&&P.body?(i=()=>{var q;return(q=P.body)==null?void 0:q.cancel(new Error(`HTTP timeout when reading the body of ${P.url}.
This error can be disabled by modifying the 'httpBodyTimeout' and/or 'httpTimeout' options.`))},P.body.on("close",()=>{clearTimeout(o)})):clearTimeout(o)),P.body&&!P.body.cancel&&(P.body.cancel=async N=>{P.body.destroy(N),o!==void 0&&clearTimeout(o)}),P}catch(g){throw o!==void 0&&clearTimeout(o),g}}}re.ActorHttpFetch=Q;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(re,s)})(We);var Zt={},oe={},ie={},se={},v={};Object.defineProperty(v,"__esModule",{value:!0});v.ActorDereferenceBase=v.isHardError=v.emptyReadable=void 0;const Zr=M,kr=h,en=j;function kt(){const s=new en.Readable;return s.push(null),s}v.emptyReadable=kt;function er(s){return!s.get(Zr.KeysInitQuery.lenient)}v.isHardError=er;class tn extends kr.Actor{constructor(e){super(e)}async dereferenceErrorHandler(e,a,n){if(er(e.context))throw a;return this.logError(e.context,a.message),{...n,data:kt()}}}v.ActorDereferenceBase=tn;Object.defineProperty(se,"__esModule",{value:!0});se.ActorDereference=void 0;const rn=v;class nn extends rn.ActorDereferenceBase{constructor(e){super(e)}async handleDereferenceErrors(e,a,n,t=0){return this.dereferenceErrorHandler(e,a,{url:e.url,exists:!1,headers:n,requestTime:t})}}se.ActorDereference=nn;var D={};Object.defineProperty(D,"__esModule",{value:!0});D.ActorDereferenceParse=D.getMediaTypeFromExtension=void 0;const an=j,st=v;function tr(s,e){const a=s.lastIndexOf(".");return a>=0&&(e==null?void 0:e[s.slice(a+1)])||""}D.getMediaTypeFromExtension=tr;class on extends st.ActorDereferenceBase{constructor(e){super(e)}async test(e){return!0}handleDereferenceStreamErrors(e,a){return(0,st.isHardError)(e.context)||(a.on("error",n=>{this.logError(e.context,n.message,()=>({url:e.url})),a.push(null)}),a=a.pipe(new an.PassThrough({objectMode:!0}))),a}async run(e){var r,o;const{context:a}=e,n=await this.mediatorDereference.mediate({...e,mediaTypes:async()=>{var i,d;return(d=await((i=this.mediatorParseMediatypes)==null?void 0:i.mediate({context:a,mediaTypes:!0})))==null?void 0:d.mediaTypes}});let t;try{t=(await this.mediatorParse.mediate({context:a,handle:{context:a,...n,metadata:await this.getMetadata(n)},handleMediaType:n.mediaType||tr(n.url,this.mediaMappings)||e.mediaType})).handle,t.data=this.handleDereferenceStreamErrors(e,t.data)}catch(i){await((o=(r=n.data).close)==null?void 0:o.call(r)),t=await this.dereferenceErrorHandler(e,i,{})}return{...n,...t}}}D.ActorDereferenceParse=on;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(se,s),a(D,s),a(v,s)})(ie);Object.defineProperty(oe,"__esModule",{value:!0});oe.ActorDereferenceFallback=void 0;const sn=ie;class cn extends sn.ActorDereference{constructor(e){super(e)}async test(e){return!0}async run(e){return this.handleDereferenceErrors(e,new Error(`Could not dereference '${e.url}'`))}}oe.ActorDereferenceFallback=cn;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(oe,s)})(Zt);var Qe={},ce={};Object.defineProperty(ce,"__esModule",{value:!0});ce.MediatorCombineUnion=void 0;const dn=h;class un extends dn.Mediator{constructor(e){super(e),this.combiner=this.createCombiner()}async mediate(e){let a;try{a=this.publish(e)}catch{a=[]}await Promise.all(a.map(({reply:t})=>t));const n=await Promise.all(a.map(t=>t.actor.runObservable(e)));return this.combiner(n)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return e=>{const a={};return a[this.field]={},[{}].concat(e.map(n=>n[this.field])).forEach((n,t,r)=>{a[this.field]={...n,...a[this.field]}}),a}}}ce.MediatorCombineUnion=un;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(ce,s)})(Qe);var Xe={},de={},T={},ue={},Ge={},L={};Object.defineProperty(L,"__esModule",{value:!0});L.ActorAbstractMediaTyped=void 0;const ln=h;class fn extends ln.Actor{constructor(e){super(e)}async run(e){if("handle"in e){const a=e;return{handle:await this.runHandle(a.handle,a.handleMediaType,e.context)}}if("mediaTypes"in e)return{mediaTypes:await this.getMediaTypes(e.context)};if("mediaTypeFormats"in e)return{mediaTypeFormats:await this.getMediaTypeFormats(e.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}async test(e){if("handle"in e){const a=e;return{handle:await this.testHandle(a.handle,a.handleMediaType,e.context)}}if("mediaTypes"in e)return{mediaTypes:await this.testMediaType(e.context)};if("mediaTypeFormats"in e)return{mediaTypeFormats:await this.testMediaTypeFormats(e.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}}L.ActorAbstractMediaTyped=fn;var le={};Object.defineProperty(le,"__esModule",{value:!0});le.ActorAbstractMediaTypedFixed=void 0;const pn=L;class _n extends pn.ActorAbstractMediaTyped{constructor(e){super(e);const a=this.priorityScale||this.priorityScale===0?this.priorityScale:1;this.mediaTypePriorities&&Object.entries(this.mediaTypePriorities).forEach(([n,t],r)=>{this.mediaTypePriorities[n]=a*t}),this.mediaTypePriorities=Object.freeze(this.mediaTypePriorities),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats)}async testHandle(e,a,n){if(!a||!(a in this.mediaTypePriorities))throw new Error(`Unrecognized media type: ${a}`);return await this.testHandleChecked(e,n)}async testMediaType(e){return!0}async getMediaTypes(e){return this.mediaTypePriorities}async testMediaTypeFormats(e){return!0}async getMediaTypeFormats(e){return this.mediaTypeFormats}}le.ActorAbstractMediaTypedFixed=_n;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(L,s),a(le,s)})(Ge);Object.defineProperty(ue,"__esModule",{value:!0});ue.ActorRdfParse=void 0;const mn=Ge;class hn extends mn.ActorAbstractMediaTyped{constructor(e){super(e)}}ue.ActorRdfParse=hn;var fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.ActorRdfParseFixedMediaTypes=void 0;const yn=Ge;class bn extends yn.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e){return!0}}fe.ActorRdfParseFixedMediaTypes=bn;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(ue,s),a(fe,s)})(T);Object.defineProperty(de,"__esModule",{value:!0});de.ActorRdfParseN3=void 0;const gn=T,wn=hr;class Pn extends gn.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,a,n){var r;e.data.on("error",o=>t.emit("error",o));const t=e.data.pipe(new wn.StreamParser({baseIRI:(r=e.metadata)==null?void 0:r.baseIRI,format:a.endsWith("n3")?a:`${a}*`}));return{data:t,metadata:{triples:a==="text/turtle"||a==="application/n-triples"||a==="text/n3"}}}}de.ActorRdfParseN3=Pn;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(de,s)})(Xe);var Ue={},pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.ActorRdfParseRdfXml=void 0;const vn=T,xn=yr;class An extends vn.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,a,n){var r;e.data.on("error",o=>t.emit("error",o));const t=e.data.pipe(new xn.RdfXmlParser({baseIRI:(r=e.metadata)==null?void 0:r.baseIRI}));return{data:t,metadata:{triples:!0}}}}pe.ActorRdfParseRdfXml=An;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(pe,s)})(Ue);var ze={},_e={};Object.defineProperty(_e,"__esModule",{value:!0});_e.ActorRdfParseXmlRdfa=void 0;const On=T,Rn=$t;class jn extends On.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,a,n){var o;const t=(e.headers&&e.headers.get("content-language"))??void 0;e.data.on("error",i=>r.emit("error",i));const r=e.data.pipe(new Rn.RdfaParser({baseIRI:(o=e.metadata)==null?void 0:o.baseIRI,profile:"xml",language:t}));return{data:r,metadata:{triples:!0}}}}_e.ActorRdfParseXmlRdfa=jn;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(_e,s)})(ze);var Ve={},me={},he={};Object.defineProperty(he,"__esModule",{value:!0});he.PrefixWrappingIterator=void 0;const Mn=Ct;class Tn extends Mn.WrappingIterator{constructor(e){super(e==null?void 0:e.then(a=>(this.prefixes=a.prefixes,a)))}read(){if(this.prefixes){for(const e of Object.entries(this.prefixes))this.emit("prefix",...e);delete this.prefixes}return super.read()}}he.PrefixWrappingIterator=Tn;Object.defineProperty(me,"__esModule",{value:!0});me.ActorRdfParseShaclc=void 0;const Sn=T,Hn=j,Dn=br,In=qe,$n=he;class Cn extends Sn.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,a,n){const t=new $n.PrefixWrappingIterator(In(e.data).then(o=>{var i;return(0,Dn.parse)(o,{extendedSyntax:a==="text/shaclc-ext",baseIRI:(i=e.metadata)==null?void 0:i.baseIRI})})),r=new Hn.Readable({objectMode:!0});return t.on("prefix",(...o)=>r.emit("prefix",...o)),{data:r.wrap(t),metadata:{triples:!0}}}}me.ActorRdfParseShaclc=Cn;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(me,s)})(Ve);var Ye={},ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.ActorRdfParseHtml=void 0;const En=T,Bn=gr,Ln=j;let Fn=class extends En.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,a,n){const t=new Ln.Readable({objectMode:!0});return t._read=async()=>{var f;t._read=()=>{};let r=1;function o(p){t.emit("data",p)}function i(p){t.emit("error",p)}function d(){--r===0&&t.push(null)}const l={baseIRI:((f=e.metadata)==null?void 0:f.baseIRI)??"",context:n,emit:o,end:d,error:i,headers:e.headers};Promise.all(this.busRdfParseHtml.publish(l)).then(async p=>{r+=p.length;const y=[];for(const m of p){const{htmlParseListener:b}=await m.actor.run(l);y.push(b)}const w=new Bn.Parser({onclosetag(){try{for(const m of y)m.onTagClose()}catch(m){i(m)}},onend(){try{for(const m of y)m.onEnd()}catch(m){i(m)}d()},onopentag(m,b){try{for(const g of y)g.onTagOpen(m,b)}catch(g){i(g)}},ontext(m){try{for(const b of y)b.onText(m)}catch(b){i(b)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:!1});e.data.on("error",i).on("data",m=>w.write(m.toString())).on("end",()=>w.end())}).catch(i)},{data:t}}};ye.ActorRdfParseHtml=Fn;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(ye,s)})(Ye);var Ze={},be={},ge={},we={};Object.defineProperty(we,"__esModule",{value:!0});we.ActorRdfParseHtml=void 0;const Kn=h;class Nn extends Kn.Actor{constructor(e){super(e)}}we.ActorRdfParseHtml=Nn;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(we,s)})(ge);Object.defineProperty(be,"__esModule",{value:!0});be.ActorRdfParseHtmlMicrodata=void 0;const qn=ge,Jn=wr;class Wn extends qn.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return!0}async run(e){const a=e.headers?e.headers.get("content-type"):null,n=a==null?void 0:a.includes("xml"),t=new Jn.MicrodataRdfParser({baseIRI:e.baseIRI,xmlMode:n});t.on("error",e.error),t.on("data",e.emit);const r=t.onEnd;return t.onEnd=()=>{r.call(t),e.end()},{htmlParseListener:t}}}be.ActorRdfParseHtmlMicrodata=Wn;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(be,s)})(Ze);var ke={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.ActorRdfParseHtmlRdfa=void 0;const Qn=ge,Xn=$t;class Gn extends Qn.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return!0}async run(e){const a=e.headers?e.headers.get("content-type"):null,n=(e.headers&&e.headers.get("content-language"))??void 0,t=a&&a.includes("xml")?"xhtml":"html",r=new Xn.RdfaParser({baseIRI:e.baseIRI,profile:t,language:n});r.on("error",e.error),r.on("data",e.emit);const o=r.onEnd;return r.onEnd=()=>{o.call(r),e.end()},{htmlParseListener:r}}}Pe.ActorRdfParseHtmlRdfa=Gn;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(Pe,s)})(ke);var et={},ve={},F={};Object.defineProperty(F,"__esModule",{value:!0});F.DocumentLoaderMediated=void 0;const Un=I,zn=Pr,Vn=qe;class tt extends zn.FetchDocumentLoader{constructor(e,a){super(tt.createFetcher(e,a)),this.mediatorHttp=e,this.context=a}static createFetcher(e,a){return async(n,t)=>{const r=await e.mediate({input:n,init:t,context:a});return r.json=async()=>JSON.parse(await Vn(Un.ActorHttp.toNodeReadable(r.body))),r}}}F.DocumentLoaderMediated=tt;Object.defineProperty(ve,"__esModule",{value:!0});ve.ActorRdfParseJsonLd=void 0;const Yn=T,J=M,Zn=vr,kn=F;class ea extends Yn.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async testHandle(e,a,n){if(n.has(J.KeysRdfParseHtmlScript.processingHtmlScript)&&a!=="application/ld+json")throw new Error("JSON-LD in script tags can only have media type 'application/ld+json'");if(!a||!(a in this.mediaTypePriorities||a.endsWith("+json")))throw new Error(`Unrecognized media type: ${a}`);return await this.testHandleChecked(e)}async runHandle(e,a,n){var o;return{data:Zn.JsonLdParser.fromHttpResponse(((o=e.metadata)==null?void 0:o.baseIRI)??"",a,e.headers,{documentLoader:n.get(J.KeysRdfParseJsonLd.documentLoader)||new kn.DocumentLoaderMediated(this.mediatorHttp,n),strictValues:n.get(J.KeysRdfParseJsonLd.strictValues),...n.get(J.KeysRdfParseJsonLd.parserOptions)}).import(e.data)}}}ve.ActorRdfParseJsonLd=ea;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(ve,s),a(F,s)})(et);var rr={},xe={},nr={},Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.ActorDereferenceRdf=void 0;const ta=ie;class ra extends ta.ActorDereferenceParse{constructor(e){super(e)}}Ae.ActorDereferenceRdf=ra;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(Ae,s)})(nr);Object.defineProperty(xe,"__esModule",{value:!0});xe.ActorDereferenceRdfParse=void 0;const na=nr;class aa extends na.ActorDereferenceRdf{constructor(e){super(e)}async getMetadata(e){return{baseIRI:e.url}}}xe.ActorDereferenceRdfParse=aa;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(xe,s)})(rr);var rt={},Oe={},Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.HtmlScriptListener=void 0;const ct=M,oa=j,ia=Et;class H{constructor(e,a,n,t,r,o,i,d){this.textChunksJsonLd=[],this.endBarrier=1,this.passedScripts=0,this.isFinalJsonLdProcessing=!1,this.mediatorRdfParseHandle=e,this.cbQuad=a,this.cbError=n,this.cbEnd=t,this.supportedTypes=r,this.context=o.set(ct.KeysRdfParseHtmlScript.processingHtmlScript,!0),this.baseIRI=i,this.headers=d,this.onlyFirstScript=o.get(ct.KeysRdfParseHtmlScript.extractAllScripts)===!1;const l=this.baseIRI.indexOf("#");this.targetScriptId=l>0?this.baseIRI.slice(l+1,this.baseIRI.length):null}static newErrorCoded(e,a){const n=new Error(e);return n.code=a,n}onEnd(){--this.endBarrier===0&&(this.textChunksJsonLd.length>0?(this.handleMediaType="application/ld+json",this.textChunks=this.textChunksJsonLd,this.textChunks.push("]"),this.textChunksJsonLd=[],this.isFinalJsonLdProcessing=!0,this.endBarrier++,this.onTagClose()):(this.passedScripts===0&&this.targetScriptId&&this.cbError(H.newErrorCoded(`Failed to find targeted script id "${this.targetScriptId}"`,"loading document failed")),this.cbEnd()),this.isFinalJsonLdProcessing=!1)}onTagClose(){if(this.handleMediaType)if(this.requiresCustomJsonLdHandling(this.handleMediaType)&&!this.isFinalJsonLdProcessing)this.handleMediaType=void 0,this.textChunks=void 0,this.onEnd();else{const e=new oa.Readable({objectMode:!0});e._read=()=>{};const a=this.textChunks,n={context:this.context,handle:{metadata:{baseIRI:this.baseIRI},data:e,headers:this.headers,context:this.context},handleMediaType:this.handleMediaType};this.mediatorRdfParseHandle.mediate(n).then(({handle:t})=>{t.data.on("error",r=>this.cbError(H.newErrorCoded(r.message,"invalid script element"))).on("data",this.cbQuad).on("end",()=>this.onEnd());for(const r of a)e.push(r);e.push(null)}).catch(t=>{this.targetScriptId?this.cbError(H.newErrorCoded(t.message,"loading document failed")):this.onEnd()}),this.handleMediaType=void 0,this.textChunks=void 0}}onTagOpen(e,a){e==="base"&&a.href&&(this.baseIRI=(0,ia.resolve)(a.href,this.baseIRI)),e==="script"&&(!this.targetScriptId||a.id===this.targetScriptId)?this.supportedTypes[a.type]?this.onlyFirstScript&&this.passedScripts>0?this.handleMediaType=void 0:(this.passedScripts++,this.handleMediaType=a.type,this.endBarrier++,this.requiresCustomJsonLdHandling(this.handleMediaType)?(this.textChunks=this.textChunksJsonLd,this.textChunks.push(this.textChunks.length===0?"[":",")):this.textChunks=[]):this.targetScriptId&&this.cbError(H.newErrorCoded(`Targeted script "${this.targetScriptId}" does not have a supported type`,"loading document failed")):this.handleMediaType=void 0}onText(e){this.handleMediaType&&this.textChunks.push(e)}requiresCustomJsonLdHandling(e){return!this.onlyFirstScript&&!this.targetScriptId&&e==="application/ld+json"}}Re.HtmlScriptListener=H;Object.defineProperty(Oe,"__esModule",{value:!0});Oe.ActorRdfParseHtmlScript=void 0;const sa=ge,ca=Re;class da extends sa.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return!0}async run(e){const a=(await this.mediatorRdfParseMediatypes.mediate({context:e.context,mediaTypes:!0})).mediaTypes;return{htmlParseListener:new ca.HtmlScriptListener(this.mediatorRdfParseHandle,e.emit,e.error,e.end,a,e.context,e.baseIRI,e.headers)}}}Oe.ActorRdfParseHtmlScript=da;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(Oe,s)})(rt);var nt={},je={};Object.defineProperty(je,"__esModule",{value:!0});je.ActorHttpProxy=void 0;const ua=I,Be=M;class la extends ua.ActorHttp{constructor(e){super(e)}async test(e){const a=e.context.get(Be.KeysHttpProxy.httpProxyHandler);if(!a)throw new Error(`Actor ${this.name} could not find a proxy handler in the context.`);if(!await a.getProxy(e))throw new Error(`Actor ${this.name} could not determine a proxy for the given request.`);return{time:Number.POSITIVE_INFINITY}}async run(e){const a=typeof e.input=="string"?e.input:e.input.url,n=e.context.get(Be.KeysHttpProxy.httpProxyHandler),t=await this.mediatorHttp.mediate({...await n.getProxy(e),context:e.context.delete(Be.KeysHttpProxy.httpProxyHandler)});return Object.defineProperty(t,"url",{configurable:!0,enumerable:!0,get:()=>t.headers.get("x-final-url")??a}),t}}je.ActorHttpProxy=la;var Me={};Object.defineProperty(Me,"__esModule",{value:!0});Me.ProxyHandlerStatic=void 0;class fa{constructor(e){this.prefixUrl=e}async getProxy(e){return{init:e.init,input:this.modifyInput(e.input)}}modifyInput(e){return typeof e=="string"?this.prefixUrl+e:new Request(this.prefixUrl+e.url,e)}}Me.ProxyHandlerStatic=fa;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(je,s),a(Me,s)})(nt);var ar={},Te={},R={};Object.defineProperty(R,"__esModule",{value:!0});R.ActorDereferenceHttpBase=R.mediaTypesToAcceptString=void 0;const dt=ie,ut=I,pa=xr,_a=Et,ma=qe,ha=/^[^ ;]*/u;function or(s,e){const a="*/*;q=0.1",n=[],t=Object.entries(s).map(([o,i])=>({mediaType:o,priority:i})).sort((o,i)=>i.priority===o.priority?o.mediaType.localeCompare(i.mediaType):i.priority-o.priority);let r=t.length-1;for(const{mediaType:o,priority:i}of t){const d=o+(i!==1?`;q=${i.toFixed(3).replace(/0*$/u,"")}`:"");if(r+d.length>e){for(;r+a.length>e;){const l=n.pop()||"";r-=l.length+1}n.push(a);break}n.push(d),r+=d.length}return n.length===0?"*/*":n.join(",")}R.mediaTypesToAcceptString=or;class ya extends dt.ActorDereference{constructor(e){super(e)}async test({url:e}){if(!/^https?:/u.test(e))throw new Error(`Cannot retrieve ${e} because it is not an HTTP(S) URL.`);return!0}async run(e){var l,f;let a=!0;const n=new pa.Headers(e.headers);n.append("Accept",or(await((l=e.mediaTypes)==null?void 0:l.call(e))??{},this.getMaxAcceptHeaderLength()));let t;const r=Date.now();try{t=await this.mediatorHttp.mediate({context:e.context,init:{headers:n,method:e.method},input:e.url})}catch(p){return this.handleDereferenceErrors(e,p)}const o=(0,_a.resolve)(t.url,e.url),i=Date.now()-r;if(t.status!==200){a=!1;const p=t.body?await ma(ut.ActorHttp.toNodeReadable(t.body)):"empty response";if(!e.acceptErrors){const y=new Error(`Could not retrieve ${e.url} (HTTP status ${t.status}):
${p}`);return this.handleDereferenceErrors(e,y,t.headers,i)}}const d=(f=ha.exec(t.headers.get("content-type")??""))==null?void 0:f[0];return{url:o,data:a?ut.ActorHttp.toNodeReadable(t.body):(0,dt.emptyReadable)(),exists:a,requestTime:i,headers:t.headers,mediaType:d!=="text/plain"?d:void 0}}}R.ActorDereferenceHttpBase=ya;Object.defineProperty(Te,"__esModule",{value:!0});Te.ActorDereferenceHttp=void 0;const ba=R;class ga extends ba.ActorDereferenceHttpBase{getMaxAcceptHeaderLength(){return this.maxAcceptHeaderLengthBrowser}}Te.ActorDereferenceHttp=ga;(function(s){var e=c&&c.__createBinding||(Object.create?function(n,t,r,o){o===void 0&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,o,i)}:function(n,t,r,o){o===void 0&&(o=r),n[o]=t[r]}),a=c&&c.__exportStar||function(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e(t,n,r)};Object.defineProperty(s,"__esModule",{value:!0}),a(Te,s),a(R,s)})(ar);var Le,lt;function wa(){if(lt)return Le;lt=1;const s=new h.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^2.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus"}),e=new h.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^2.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),a=new h.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference/^2.0.0/components/ActorDereference.jsonld#ActorDereference_default_bus"}),n=new h.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^2.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),t=new h.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^2.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),r=new $.MediatorRace({name:"urn:comunica:default:dereference-rdf/mediators#main",bus:s}),o=new Je.MediatorNumber({field:"time",type:"min",ignoreErrors:!0,name:"urn:comunica:default:http/mediators#main",bus:e}),i=new We.ActorHttpFetch({agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:e}),d=new Zt.ActorDereferenceFallback({name:"urn:comunica:default:dereference/actors#fallback",bus:a}),l=new $.MediatorRace({name:"urn:comunica:default:dereference/mediators#main",bus:a}),f=new $.MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:n}),p=new Qe.MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:n}),y=new Xe.ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:n}),w=new Ue.ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:n}),m=new ze.ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:n}),b=new Ve.ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:n}),g=new Ye.ActorRdfParseHtml({busRdfParseHtml:t,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:n}),K=new Ze.ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:t}),Ie=new ke.ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:t}),$e=new et.ActorRdfParseJsonLd({mediatorHttp:o,mediaTypePriorities:{"application/json":.5,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:n}),P=new rr.ActorDereferenceRdfParse({mediatorDereference:l,mediatorParse:f,mediatorParseMediatypes:p,mediaMappings:{htm:"text/html",html:"text/html",json:"application/json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"},name:"urn:comunica:default:dereference-rdf/actors#parse",bus:s}),N=new rt.ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:p,mediatorRdfParseHandle:f,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:t}),q=new nt.ActorHttpProxy({mediatorHttp:o,name:"urn:comunica:default:http/actors#proxy",bus:e,beforeActors:[i]}),cr=new ar.ActorDereferenceHttp({mediatorHttp:o,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,name:"urn:comunica:default:dereference/actors#http",bus:a,beforeActors:[d]});return Le=new(ir()).RdfDereferencer({mediatorDereferenceRdf:r,actors:[cr,d,P,q,i,y,$e,w,m,g,b,K,Ie,N]}),Le}var ft;function ir(){return ft||(ft=1,function(s){var e=c&&c.__createBinding||(Object.create?function(t,r,o,i){i===void 0&&(i=o);var d=Object.getOwnPropertyDescriptor(r,o);(!d||("get"in d?!r.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return r[o]}}),Object.defineProperty(t,i,d)}:function(t,r,o,i){i===void 0&&(i=o),t[i]=r[o]}),a=c&&c.__exportStar||function(t,r){for(var o in t)o!=="default"&&!Object.prototype.hasOwnProperty.call(r,o)&&e(r,t,o)};Object.defineProperty(s,"__esModule",{value:!0}),s.rdfDereferencer=void 0,a(G,s),a(C,s);const n=wa();s.rdfDereferencer=n}(Ce)),Ce}var Fe={},Se={},He={};Object.defineProperty(He,"__esModule",{value:!0});He.mediaMappings=void 0;const Pa={htm:"text/html",html:"text/html",json:"application/ld+json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"};He.mediaMappings=Pa;Object.defineProperty(Se,"__esModule",{value:!0});Se.RdfParser=void 0;const pt=h,va=j,xa=He;class De{constructor(e){this.mediatorRdfParseMediatypes=e.mediatorRdfParseMediatypes,this.mediatorRdfParseHandle=e.mediatorRdfParseHandle}async getContentTypes(){return Object.keys(await this.getContentTypesPrioritized())}async getContentTypesPrioritized(){return(await this.mediatorRdfParseMediatypes.mediate({context:new pt.ActionContext,mediaTypes:!0})).mediaTypes}parse(e,a){let n;if("contentType"in a&&a.contentType)n=a.contentType;else if("path"in a&&a.path){if(n=this.getContentTypeFromExtension(a.path),!n)throw new Error(`No valid extension could be detected from the given 'path' option: '${a.path}'`)}else throw new Error("Missing 'contentType' or 'path' option while parsing.");const t=new va.PassThrough({objectMode:!0}),r=new pt.ActionContext(a);return this.mediatorRdfParseHandle.mediate({context:r,handle:{data:e,metadata:{baseIRI:a.baseIRI},context:r},handleMediaType:n}).then(o=>{const i=o.handle.data;i.on("error",d=>t.emit("error",d)),i.on("prefix",(d,l)=>t.emit("prefix",d,l)),i.on("context",d=>t.emit("context",d)),i.pipe(t)}).catch(o=>t.emit("error",o)),t}getContentTypeFromExtension(e){const a=e.lastIndexOf(".");if(a>=0){const n=e.substr(a);return De.CONTENT_MAPPINGS[n.substring(1)]||""}return""}}Se.RdfParser=De;De.CONTENT_MAPPINGS=xa.mediaMappings;var Ke,_t;function Aa(){if(_t)return Ke;_t=1;const s=new h.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^2.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),e=new h.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^2.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),a=new h.Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^2.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),n=new Qe.MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:s}),t=new $.MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:s}),r=new Xe.ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:s}),o=new Ue.ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:s}),i=new ze.ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:s}),d=new Ve.ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:s}),l=new Je.MediatorNumber({field:"time",type:"min",ignoreErrors:!0,name:"urn:comunica:default:http/mediators#main",bus:e}),f=new We.ActorHttpFetch({agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:e}),p=new Ye.ActorRdfParseHtml({busRdfParseHtml:a,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:s}),y=new Ze.ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:a}),w=new ke.ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:a}),m=new rt.ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:n,mediatorRdfParseHandle:t,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:a}),b=new et.ActorRdfParseJsonLd({mediatorHttp:l,mediaTypePriorities:{"application/json":.5,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:s}),g=new nt.ActorHttpProxy({mediatorHttp:l,name:"urn:comunica:default:http/actors#proxy",bus:e,beforeActors:[f]});return Ke=new(sr()).RdfParser({mediatorRdfParseMediatypes:n,mediatorRdfParseHandle:t,actors:[g,f,r,b,o,i,p,d,y,w,m]}),Ke}var mt;function sr(){return mt||(mt=1,function(s){var e=c&&c.__createBinding||(Object.create?function(t,r,o,i){i===void 0&&(i=o);var d=Object.getOwnPropertyDescriptor(r,o);(!d||("get"in d?!r.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return r[o]}}),Object.defineProperty(t,i,d)}:function(t,r,o,i){i===void 0&&(i=o),t[i]=r[o]}),a=c&&c.__exportStar||function(t,r){for(var o in t)o!=="default"&&!Object.prototype.hasOwnProperty.call(r,o)&&e(r,t,o)};Object.defineProperty(s,"__esModule",{value:!0}),s.rdfParser=void 0,a(Se,s);const n=Aa();s.rdfParser=n}(Fe)),Fe}var Ne=c&&c.__awaiter||function(s,e,a,n){function t(r){return r instanceof a?r:new a(function(o){o(r)})}return new(a||(a=Promise))(function(r,o){function i(f){try{l(n.next(f))}catch(p){o(p)}}function d(f){try{l(n.throw(f))}catch(p){o(p)}}function l(f){f.done?r(f.value):t(f.value).then(i,d)}l((n=n.apply(s,e||[])).next())})};Object.defineProperty(X,"__esModule",{value:!0});var $a=X.streamToStore=at;X.default=Ta;X.parse=Sa;const Oa=jr,ht=ir(),Ra=sr(),ja=Ar,Ma=j,yt=Ct;function at(s){const e={store:new Oa.Store,prefixes:{}};return s.on("prefix",(a,n)=>{e.prefixes[a]=typeof n=="string"?n:n.value}),(0,ja.promisifyEventEmitter)(e.store.import(s),e)}function Ta(s,e){return Ne(this,void 0,void 0,function*(){const a=Array.isArray(s)?new yt.UnionIterator(s.map(n=>Ne(this,void 0,void 0,function*(){return(yield ht.rdfDereferencer.dereference(n,e)).data})).map(n=>(0,yt.wrap)(n.then(t=>(t.on("prefix",(...r)=>a.emit("prefix",...r)),t)),{autoStart:!1})),{autoStart:!1}):(yield ht.rdfDereferencer.dereference(s,e)).data;return at(a)})}function Sa(s,e){return Ne(this,void 0,void 0,function*(){return at(Ra.rdfParser.parse(typeof s=="string"?Ma.Readable.from([s]):s,e))})}export{$a as s};
