import{_ as f,u as g,m as n,L as m,bZ as p,c as i,a as r,t as l,B as c,C as S,D as b,g as d,b as h,H as _,o as u}from"./index-1k77lEJI.js";import{s as D}from"./index-DhMN7WeR.js";import{a as v}from"./n3-compare-DeFJxhd2.js";import"./lodash-X5k4Oy6K.js";const w={name:"Source",setup(){return{store:g()}},mounted(){this.getResource()},watch:{resource_iri(t){this.getResource()}},computed:{...n(h,["graph_iri","resource_iri"]),...n(_,["prefixes_flat"])},data(){return{debug:!1,originalData:{},resourceSource:""}},methods:{async getResource(){console.log("get resource");const t=await this.store.getResource(this.resource_iri);this.originalData=(await D(t)).store,this.resourceSource=await m(this.originalData.match(),{format:"text/turtle",prefixes:this.prefixes_flat})},async updateResource(){const t=await p(this.resourceSource),e=v(this.originalData,t);this.store.deleteInsertData({insertArray:e.add,deleteArray:e.del,graphIri:this.graph_iri})}}},x={class:"form-group"},y=r("label",{for:"sourceInput",class:""},"Turtle",-1),R={key:1};function k(t,e,C,T,s,a){return u(),i("div",null,[r("strong",null,"Sources of "+l(t.resource_iri),1),c(" ("),r("a",{onClick:e[0]||(e[0]=(...o)=>a.getResource&&a.getResource(...o))},"refresh"),c(") "),r("form",null,[r("div",x,[y,S(r("textarea",{id:"sourceInput",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=o=>s.resourceSource=o),rows:"15"},null,512),[[b,s.resourceSource]])]),r("button",{type:"button",class:"btn btn-outline-primary mb-0",onClick:e[2]||(e[2]=o=>a.updateResource())},"Submit")]),s.debug==!1?(u(),i("a",{key:0,onClick:e[3]||(e[3]=o=>s.debug=!0)},"(show debug)")):d("",!0),s.debug?(u(),i("div",R,[r("a",{onClick:e[4]||(e[4]=o=>s.debug=!1)},"(hide debug)"),r("pre",null,l(t.originalSource)+" ",1)])):d("",!0)])}const A=f(w,[["render",k]]);export{A as default};
